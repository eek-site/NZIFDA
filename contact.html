<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - NZIFDA</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Barlow:wght@400;500;600&display=swap');
        :root { --primary: #1a1a1a; --danger: #dc2626; --warning: #f59e0b; --success: #16a34a; --accent: #0369a1; --surface: #f8fafc; --border: #e2e8f0; --text: #334155; --text-dark: #0f172a; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Barlow', sans-serif; background: var(--surface); color: var(--text); line-height: 1.8; }
        .header { background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%); padding: 1rem 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.15); position: relative; }
        .header-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { color: white; font-family: 'Oswald', sans-serif; font-size: 1.25rem; font-weight: 700; }
        .logo a { color: white; text-decoration: none; }
        .back-link { color: white; text-decoration: none; font-weight: 500; transition: color 0.3s; display: none; }
        .mobile-menu-toggle { display: none; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; padding: 0.5rem; }
        .mobile-nav { display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--primary); padding: 1rem; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .mobile-nav.active { display: block; }
        .mobile-nav a { display: block; color: white; text-decoration: none; padding: 0.75rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .mobile-nav a:hover { background: rgba(255,255,255,0.1); color: var(--danger); }
        .container { max-width: 1000px; margin: 2rem auto; padding: 0 1rem; }
        .content { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        h1 { font-family: 'Oswald', sans-serif; font-size: 2rem; color: var(--text-dark); margin-bottom: 1rem; border-bottom: 4px solid var(--danger); padding-bottom: 1rem; }
        h2 { font-family: 'Oswald', sans-serif; font-size: 1.5rem; color: var(--text-dark); margin-top: 2.5rem; margin-bottom: 1rem; }
        .contact-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 2rem 0; }
        .contact-card { background: var(--surface); padding: 1.5rem; border-radius: 8px; border-left: 4px solid var(--danger); }
        .contact-card h3 { font-family: 'Oswald', sans-serif; color: var(--danger); margin-bottom: 1rem; font-size: 1.2rem; }
        .contact-form { margin: 2rem 0; padding: 1.5rem; background: var(--surface); border-radius: 8px; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.95rem; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 0.75rem; border: 1px solid var(--border); border-radius: 6px; font-family: inherit; font-size: 1rem; }
        .form-group textarea { min-height: 120px; resize: vertical; }
        .btn { padding: 0.75rem 2rem; background: var(--danger); color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 1rem; transition: background 0.3s; }
        .btn:hover { background: #b91c1c; }
        .footer { background: var(--primary); color: white; padding: 2rem 1rem; text-align: center; margin-top: 4rem; }
        .footer a { color: var(--danger); text-decoration: none; }
        @media (min-width: 768px) {
            .header { padding: 1.5rem 2rem; }
            .logo { font-size: 1.5rem; }
            .back-link { display: inline-block; }
            .mobile-menu-toggle { display: none; }
            .container { padding: 0 2rem; margin: 3rem auto; }
            .content { padding: 3rem; }
            h1 { font-size: 2.5rem; }
            h2 { font-size: 1.8rem; }
            .contact-grid { grid-template-columns: repeat(2, 1fr); gap: 2rem; }
            .contact-card { padding: 2rem; }
        }
        @media (min-width: 1024px) {
            .contact-grid { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
    <script>
        // Power Automate endpoint
        const POWER_AUTOMATE_URL = 'https://default61ffc6bcd9ce458b8120d32187c377.0d.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/9a207992d26c4e73bd974dab2623c9c0/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=EL1ZRvFplGo3NgrPzLqb1eUoe29BNQF-pxmOla6U0Cw';
        
        // Function to submit form to Power Automate - sends all fields as-is
        async function submitToPowerAutomate(formType, formData) {
            try {
                // Create payload with form type and all form fields
                const payload = {
                    formType: formType,
                    ...formData  // Spread all form fields directly into payload
                };
                
                const response = await fetch(POWER_AUTOMATE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const result = await response.json();
                return { success: true, result: result };
            } catch (error) {
                console.error('Error submitting form:', error);
                return { success: false, error: error.message };
            }
        }
        
        // Function to collect form data
        function collectFormData(form) {
            const formData = {};
            const inputs = form.querySelectorAll('input, select, textarea');
            
            inputs.forEach(input => {
                if (input.name && input.name !== '') {
                    if (input.type === 'checkbox' || input.type === 'radio') {
                        if (input.checked) {
                            formData[input.name] = input.value;
                        }
                    } else {
                        formData[input.name] = input.value || '';
                    }
                }
            });
            
            return formData;
        }
    </script>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo"><a href="index.html">NZIFDA</a></div>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
            <a href="index.html" class="back-link">← Back to Home</a>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <a href="index.html">Home</a>
            <a href="for-consumers.html">For Consumers</a>
            <a href="for-operators.html">For Operators</a>
            <a href="for-fuel-stations.html">For Fuel Stations</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>
    <script>
        function toggleMobileMenu() {
            document.getElementById('mobileNav').classList.toggle('active');
        }
    </script>
    <div class="container">
        <div class="content">
            <h1>Contact NZIFDA</h1>
            <p>Get in touch with us for inquiries, certification applications, compliance reports, or general questions.</p>
            
            <div class="contact-grid">
                <div class="contact-card">
                    <h3>General Inquiries</h3>
                    <p><strong>Hours:</strong> Monday - Friday, 9:00 AM - 5:00 PM NZST</p>
                    <p>Use the <a href="#general-form" style="color: var(--danger); text-decoration: underline; font-weight: 600;">General Contact Form</a> below</p>
                </div>
                
                <div class="contact-card">
                    <h3>Certification</h3>
                    <p>For certification applications and inquiries</p>
                    <p><a href="#certification-form" class="btn" style="margin-top: 1rem; display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem;">Apply for Certification</a></p>
                </div>
                
                <div class="contact-card">
                    <h3>Compliance Reports</h3>
                    <p>To report non-compliant operators</p>
                    <p><a href="#compliance-form" class="btn" style="margin-top: 1rem; display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem;">Report Non-Compliance</a></p>
                </div>
                
                <div class="contact-card">
                    <h3>Privacy & Data</h3>
                    <p>For privacy inquiries and data requests</p>
                    <p>Use the <a href="#general-form" style="color: var(--danger); text-decoration: underline; font-weight: 600;">General Contact Form</a> and select "Privacy Inquiry"</p>
                </div>
                
                <div class="contact-card">
                    <h3>Accessibility</h3>
                    <p>For accessibility concerns and alternative formats</p>
                    <p>Use the <a href="#general-form" style="color: var(--danger); text-decoration: underline; font-weight: 600;">General Contact Form</a> and select "Accessibility"</p>
                </div>
                
                <div class="contact-card">
                    <h3>Emergency</h3>
                    <p><strong>For misfuel emergencies:</strong></p>
                    <p>Contact an operator displaying the <a href="index.html#certification">NZIFDA Mark</a> immediately</p>
                    <p><strong>DO NOT START YOUR ENGINE</strong></p>
                </div>
            </div>
            
            <h2 id="general-form">General Contact Form</h2>
            <form class="contact-form" id="generalContactForm" onsubmit="event.preventDefault(); handleGeneralFormSubmit(event);">
                <div class="form-group">
                    <label for="name">Name *</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="subject">Subject *</label>
                    <select id="subject" name="subject" required>
                        <option value="">Select a subject...</option>
                        <option value="general">General Inquiry</option>
                        <option value="privacy">Privacy Inquiry</option>
                        <option value="accessibility">Accessibility</option>
                        <option value="training">Training Inquiry</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Message *</label>
                    <textarea id="message" name="message" required></textarea>
                </div>
                <button type="submit" class="btn">Send Message</button>
            </form>

            <h2 id="certification-form">Certification Application Form</h2>
            <p style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid var(--accent); border-radius: 4px;"><strong>Two-Tier System:</strong> Compliant Operators serve as the management layer. Certified Workshops must operate under a Compliant Operator license. <a href="certification.html#insurance" style="color: var(--accent); text-decoration: underline;">View certification fees and requirements</a>.</p>
            <form class="contact-form" id="certificationForm" onsubmit="event.preventDefault(); handleCertificationFormSubmit(event);">
                <div class="form-group">
                    <label for="cert-type">Certification Type *</label>
                    <select id="cert-type" name="cert-type" required onchange="toggleCertFields()">
                        <option value="">Select certification type...</option>
                        <option value="compliant-operator">Compliant Operator</option>
                        <option value="certified-workshop">Certified Workshop</option>
                    </select>
                </div>
                <div class="form-group" id="workshop-operator-group" style="display: none;">
                    <label for="cert-operator">Compliant Operator License Holder *</label>
                    <input type="text" id="cert-operator" name="cert-operator" placeholder="Name of Compliant Operator you will operate under">
                    <small style="display: block; margin-top: 0.5rem; color: #64748b;">Required for Certified Workshop applications</small>
                </div>
                <div class="form-group">
                    <label for="cert-company">Company/Organization Name *</label>
                    <input type="text" id="cert-company" name="cert-company" required>
                </div>
                <div class="form-group">
                    <label for="cert-contact">Contact Person Name *</label>
                    <input type="text" id="cert-contact" name="cert-contact" required>
                </div>
                <div class="form-group">
                    <label for="cert-email">Email Address *</label>
                    <input type="email" id="cert-email" name="cert-email" required>
                </div>
                <div class="form-group" id="facility-group">
                    <label for="cert-facility">Fixed Facility Address *</label>
                    <textarea id="cert-facility" name="cert-facility" required placeholder="Full address of your fixed facility"></textarea>
                    <small style="display: block; margin-top: 0.5rem; color: #64748b;">Required for Certified Workshop applications</small>
                </div>
                <div class="form-group" id="license-group">
                    <label for="cert-license">Dangerous Goods License Number *</label>
                    <input type="text" id="cert-license" name="cert-license" placeholder="Required for Certified Workshop applications">
                    <small style="display: block; margin-top: 0.5rem; color: #64748b;">Required for Certified Workshop applications</small>
                </div>
                <div class="form-group">
                    <label for="cert-insurance">Insurance Provider & Policy Number *</label>
                    <input type="text" id="cert-insurance" name="cert-insurance" required placeholder="Provider name and policy number">
                </div>
                <div class="form-group" id="equipment-group">
                    <label for="cert-equipment">Equipment Description</label>
                    <textarea id="cert-equipment" name="cert-equipment" placeholder="Describe your vacuum extraction and remediation equipment (Required for Certified Workshop applications)"></textarea>
                    <small style="display: block; margin-top: 0.5rem; color: #64748b;">Required for Certified Workshop applications</small>
                </div>
                <div class="form-group" id="staff-group">
                    <label for="cert-staff">Number of Trained Staff</label>
                    <input type="number" id="cert-staff" name="cert-staff" min="1" placeholder="Required for Certified Workshop applications">
                    <small style="display: block; margin-top: 0.5rem; color: #64748b;">Required for Certified Workshop applications</small>
                </div>
                <div class="form-group">
                    <label for="cert-management">Management Systems & Capabilities</label>
                    <textarea id="cert-management" name="cert-management" placeholder="Describe your management systems, customer service capabilities, and network coordination processes (Important for Compliant Operator applications)"></textarea>
                    <small style="display: block; margin-top: 0.5rem; color: #64748b;">Important for Compliant Operator applications</small>
                </div>
                <div class="form-group">
                    <label for="cert-additional">Additional Information</label>
                    <textarea id="cert-additional" name="cert-additional" placeholder="Any additional information about your operation"></textarea>
                </div>
                <button type="submit" class="btn">Submit Certification Application</button>
            </form>
            <script>
                function toggleCertFields() {
                    const certType = document.getElementById('cert-type').value;
                    const workshopOperatorGroup = document.getElementById('workshop-operator-group');
                    const facilityGroup = document.getElementById('facility-group');
                    const licenseGroup = document.getElementById('license-group');
                    const equipmentGroup = document.getElementById('equipment-group');
                    const staffGroup = document.getElementById('staff-group');
                    
                    if (certType === 'certified-workshop') {
                        workshopOperatorGroup.style.display = 'block';
                        document.getElementById('cert-operator').required = true;
                        facilityGroup.querySelector('textarea').required = true;
                        licenseGroup.querySelector('input').required = true;
                        equipmentGroup.querySelector('textarea').required = true;
                        staffGroup.querySelector('input').required = true;
                    } else if (certType === 'compliant-operator') {
                        workshopOperatorGroup.style.display = 'none';
                        document.getElementById('cert-operator').required = false;
                        facilityGroup.querySelector('textarea').required = false;
                        licenseGroup.querySelector('input').required = false;
                        equipmentGroup.querySelector('textarea').required = false;
                        staffGroup.querySelector('input').required = false;
                    } else {
                        workshopOperatorGroup.style.display = 'none';
                    }
                }
            </script>

            <h2 id="compliance-form">Compliance Report Form</h2>
            <form class="contact-form" id="complianceForm" onsubmit="event.preventDefault(); handleComplianceFormSubmit(event);">
                <div class="form-group">
                    <label for="comp-reporter">Your Name *</label>
                    <input type="text" id="comp-reporter" name="comp-reporter" required>
                </div>
                <div class="form-group">
                    <label for="comp-email">Your Email *</label>
                    <input type="email" id="comp-email" name="comp-email" required>
                </div>
                <div class="form-group">
                    <label for="comp-company">Organization/Company Name (Being Reported) *</label>
                    <input type="text" id="comp-company" name="comp-company" required>
                </div>
                <div class="form-group">
                    <label for="comp-location">Location *</label>
                    <input type="text" id="comp-location" name="comp-location" required placeholder="City, region">
                </div>
                <div class="form-group">
                    <label for="comp-violation">Non-Compliance Category *</label>
                    <select id="comp-violation" name="comp-violation" required>
                        <option value="">Select category...</option>
                        <option value="incomplete">Inadequate fuel extraction procedures</option>
                        <option value="pricing">Pricing transparency violations</option>
                        <option value="damage">Improper remediation resulting in damage</option>
                        <option value="disposal">Non-compliant waste disposal methods</option>
                        <option value="documentation">Insufficient documentation/warranty</option>
                        <option value="certification">Operating without proper certification</option>
                        <option value="mobile">Operating mobile extraction services (non-compliant)</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="comp-details">Detailed Description *</label>
                    <textarea id="comp-details" name="comp-details" required placeholder="Please provide as much detail as possible about the non-compliance issue"></textarea>
                </div>
                <div class="form-group">
                    <label for="comp-date">Date of Incident (if applicable)</label>
                    <input type="date" id="comp-date" name="comp-date">
                </div>
                <button type="submit" class="btn">Submit Compliance Report</button>
            </form>
        </div>
    </div>
    <footer class="footer">
        <p>&copy; 2024 NZIFDA - New Zealand Insoluble Fuel Disposal Agency</p>
        <p><a href="index.html">Home</a> | <a href="privacy-policy.html">Privacy Policy</a> | <a href="cookies-policy.html">Cookies Policy</a> | <a href="terms-of-service.html">Terms of Service</a></p>
    </footer>
</body>
</html>

